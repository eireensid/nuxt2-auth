(window.webpackJsonp=window.webpackJsonp||[]).push([[4,2],{317:function(t,e,r){"use strict";r.r(e);r(27),r(5),r(4),r(2),r(6),r(3),r(7);var n=r(33),o=r(0),c=(r(86),r(1),r(58));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"LoginForm",data:function(){return{name:"",password:"",authError:{show:!1,text:""},btnDisabled:!1}},mixins:[r(169).a],methods:d(d({},Object(c.b)(["setIsAuth"])),{},{onSubmit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.btnDisabled=!0,t.authError.show=!1,r={name:t.name,password:t.password},e.prev=3,e.next=6,fetch("".concat("https://fair-tan-cape-buffalo-gown.cyclic.app","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(d({},r))});case 6:if(n=e.sent,t.btnDisabled=!1,200!==n.status){e.next=15;break}return e.next=11,n.json();case 11:(content=e.sent).access_token&&(t.saveTokenToLocal(content.access_token),t.$nextTick((function(){t.$nuxt.$emit("setToken",content.access_token)}))),e.next=17;break;case 15:t.authError.show=!0,t.authError.text="Неверный email или пароль";case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[3,19]])})))()}})},m=r(63),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column w-100 p-5"},[e("h1",{staticClass:"mb-1 text-center"},[t._v("Авторизация")]),t._v(" "),e("BForm",{staticClass:"d-flex flex-column align-items-center",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("BFormGroup",{staticClass:"w-50 mb-2",attrs:{label:"Логин:","label-for":"test-name"}},[e("BFormInput",{attrs:{id:"test-name",placeholder:"Введите имя",required:""},on:{focus:function(e){t.authError.show=!1}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),e("BFormGroup",{staticClass:"w-50",attrs:{label:"Пароль:","label-for":"text-password"}},[e("BFormInput",{attrs:{type:"password",id:"text-password","aria-describedby":"password-help-block",placeholder:"Введите пароль",required:""},on:{focus:function(e){t.authError.show=!1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.authError.show,expression:"authError.show"}],staticClass:"w-50 mt-3 danger"},[t._v("\n      "+t._s(t.authError.text)+"\n    ")]),t._v(" "),e("div",{staticClass:"w-50",class:t.authError.show?"mt-2":"mt-4"},[e("BButton",{attrs:{type:"submit",variant:"success",disabled:t.btnDisabled}},[t._v("Войти")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},319:function(t,e,r){"use strict";r.r(e);r(317);var n={name:"LoginPage"},o=r(63),component=Object(o.a)(n,(function(){return(0,this._self._c)("LoginForm")}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LoginForm:r(317).default})}}]);